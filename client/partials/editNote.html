<section class="edit-note">
    <h2 ng-if="!form.id">New Entry</h2>
    <h2 ng-if="form.id">Edit Entry</h2>
    <form role="form" ng-submit="saveEntry()">
        <div class="row">
            <input ng-model="form.title" type="text" class="form-control col-xs-12" placeholder="Title" required>
        </div>
        <div class="row">

            <textarea class="col-md-6" placeholder="Content" ng-keyup="contentUpdated()" ng-model="form.body" elastic required></textarea>

            <div class="col-md-6 preview markdown" ng-bind-html="form.body | markdownToHtml | autolinker"></div>

        </div>
        <div>
            <select class="form-control" ng-options="o.id as o.name for o in statuses" ng-model="form.status">
            </select>
        </div>
        <div class="row tags">

            <div class="added-tag" ng-repeat="tag in tags.selected">
                {{ tag }}
                <i class="icon glyphicon glyphicon-remove" ng-click="cancelTag(tag)"></i>
            </div>

            <input type="text" class="form-control input-sm name" ng-model="tags.newTag" placeholder="Select tag" typeahead="option for option in tags.saved | filter:$viewValue | limitTo:8" typeahead-on-select="typeaheadSelected()" />
            <a href="#/tags/new">add new</a>

        </div>
        <button type="submit" class="btn">Save</button>
    </form>
    <div class="ast-preview" ng-class="{open: astPreviewOpen}">
        <div class="open" ng-click="astPreviewOpen = !astPreviewOpen">AST</div>
        <!-- {{ JSON.stringify(astPreview(), null, 2) }} -->
        <pre>{{ formattedAst }}</pre>
        <!-- {{ JSON.stringify(astPreview()) }} -->
    </div>
</section>
